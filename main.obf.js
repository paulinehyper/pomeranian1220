const a0_0x500c1a=a0_0x3f2e;(function(_0xc1368d,_0x5a8afc){const _0x5c4bdc=a0_0x3f2e,_0x48c7da=_0xc1368d();while(!![]){try{const _0x23e0fd=-parseInt(_0x5c4bdc(0x216))/0x1*(-parseInt(_0x5c4bdc(0x244))/0x2)+-parseInt(_0x5c4bdc(0x247))/0x3*(parseInt(_0x5c4bdc(0x243))/0x4)+parseInt(_0x5c4bdc(0x1d3))/0x5+parseInt(_0x5c4bdc(0x234))/0x6*(parseInt(_0x5c4bdc(0x23d))/0x7)+parseInt(_0x5c4bdc(0x23f))/0x8*(parseInt(_0x5c4bdc(0x240))/0x9)+-parseInt(_0x5c4bdc(0x24e))/0xa*(-parseInt(_0x5c4bdc(0x227))/0xb)+-parseInt(_0x5c4bdc(0x1fd))/0xc;if(_0x23e0fd===_0x5a8afc)break;else _0x48c7da['push'](_0x48c7da['shift']());}catch(_0x22d8fe){_0x48c7da['push'](_0x48c7da['shift']());}}}(a0_0x3031,0x2eb6b),module['exports'][a0_0x500c1a(0x208)]=autoClassifyEmailTodo);const {app,BrowserWindow,ipcMain,Tray,Menu,dialog}=require('electron'),path=require(a0_0x500c1a(0x1f8)),db=require(a0_0x500c1a(0x1c6)),setupMailIpc=require(a0_0x500c1a(0x1f1));function autoClassifyEmailTodo(_0x2bce7c,_0x421216){const _0x3ed3c3=a0_0x500c1a;let _0x323f57=db[_0x3ed3c3(0x20a)](_0x3ed3c3(0x1c8))[_0x3ed3c3(0x254)]()[_0x3ed3c3(0x245)](_0x3d83b5=>_0x3d83b5['word']);_0x323f57[_0x3ed3c3(0x1dc)]===0x1&&typeof _0x323f57[0x0]===_0x3ed3c3(0x20e)&&_0x323f57[0x0][_0x3ed3c3(0x206)](',')&&(_0x323f57=_0x323f57[0x0][_0x3ed3c3(0x205)](',')[_0x3ed3c3(0x245)](_0x13ed44=>_0x13ed44[_0x3ed3c3(0x241)]())['filter'](Boolean));const _0x282fc2=(_0x2bce7c||'')['toLowerCase'](),_0x130190=(_0x421216||'')['toLowerCase']();for(const _0x20bb1e of _0x323f57){if(!_0x20bb1e)continue;const _0x2a0606=_0x20bb1e[_0x3ed3c3(0x1e7)]();if(_0x282fc2['includes'](_0x2a0606)||_0x130190[_0x3ed3c3(0x206)](_0x2a0606))return 0x9;}let _0x28aea8=db[_0x3ed3c3(0x20a)](_0x3ed3c3(0x22d))[_0x3ed3c3(0x254)]()['map'](_0x543715=>_0x543715[_0x3ed3c3(0x1f3)]);_0x28aea8[_0x3ed3c3(0x1dc)]===0x1&&typeof _0x28aea8[0x0]===_0x3ed3c3(0x20e)&&_0x28aea8[0x0][_0x3ed3c3(0x206)](',')&&(_0x28aea8=_0x28aea8[0x0]['split'](',')[_0x3ed3c3(0x245)](_0x16968c=>_0x16968c[_0x3ed3c3(0x241)]())['filter'](Boolean));for(const _0x1e4f61 of _0x28aea8){if(!_0x1e4f61)continue;const _0x3296e3=_0x1e4f61['toLowerCase']();if(_0x282fc2[_0x3ed3c3(0x206)](_0x3296e3)||_0x130190[_0x3ed3c3(0x206)](_0x3296e3))return 0x1;}const _0x39ab53=/(\d{1,2})[\/.\-](\d{1,2})\s*까지/;if(_0x39ab53[_0x3ed3c3(0x207)](_0x2bce7c)||_0x39ab53[_0x3ed3c3(0x207)](_0x421216))return 0x1;return 0x0;}ipcMain[a0_0x500c1a(0x1c2)]('insert-email',(_0x4edf04,_0x5deaa7)=>{const _0x18f813=a0_0x500c1a,_0x35912f=autoClassifyEmailTodo(_0x5deaa7[_0x18f813(0x251)],_0x5deaa7[_0x18f813(0x1e5)]);return db['prepare']('INSERT\x20INTO\x20emails\x20(subject,\x20body,\x20todo_flag,\x20received_at,\x20from_addr)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)')[_0x18f813(0x1d7)](_0x5deaa7['subject'],_0x5deaa7[_0x18f813(0x1e5)],_0x35912f,_0x5deaa7['received_at']||'',_0x5deaa7[_0x18f813(0x22a)]||''),{'success':!![],'todo_flag':_0x35912f};}),ipcMain[a0_0x500c1a(0x1c2)](a0_0x500c1a(0x1e3),(_0xf4456c,_0x393326,_0x4a83e6)=>{const _0x1f352f=a0_0x500c1a;return db[_0x1f352f(0x20a)](_0x1f352f(0x20b))['run'](_0x4a83e6,_0x393326),!![];});function extractDeadlineDate(_0x465793){const _0x2f18cd=a0_0x500c1a;if(!_0x465793)return null;const _0xddea23=/\b(\d{1,2})[\/.](\d{1,2})\b/,_0x3c59ea=_0x465793[_0x2f18cd(0x1fc)](_0xddea23);if(_0x3c59ea){let _0x4b98dc=parseInt(_0x3c59ea[0x1]),_0x15efc8=parseInt(_0x3c59ea[0x2]);if(_0x4b98dc<0x1||_0x4b98dc>0xc||_0x15efc8<0x1||_0x15efc8>0x1f)return null;const _0x5e9ff5=new Date(),_0x565348=_0x5e9ff5['getFullYear']();let _0x31abe2=new Date(_0x565348,_0x4b98dc-0x1,_0x15efc8);const _0x25d497=new Date(_0x5e9ff5[_0x2f18cd(0x22c)](),_0x5e9ff5[_0x2f18cd(0x1f7)](),_0x5e9ff5['getDate']());_0x31abe2<_0x25d497&&_0x31abe2[_0x2f18cd(0x233)](_0x565348+0x1);const _0x4aaa5b=_0x31abe2['getFullYear'](),_0x2ea009=String(_0x31abe2[_0x2f18cd(0x1f7)]()+0x1)[_0x2f18cd(0x209)](0x2,'0'),_0x87a395=String(_0x31abe2[_0x2f18cd(0x1c7)]())[_0x2f18cd(0x209)](0x2,'0');return console['log'](_0x2f18cd(0x229)+_0x3c59ea[0x0]+_0x2f18cd(0x20c)+_0x4aaa5b+'-'+_0x2ea009+'-'+_0x87a395),_0x4aaa5b+'-'+_0x2ea009+'-'+_0x87a395;}return null;}let mainWindow=null,tray=null;const iconPath=process['platform']===a0_0x500c1a(0x1d2)?path[a0_0x500c1a(0x1e2)](__dirname,a0_0x500c1a(0x1ec),a0_0x500c1a(0x1df)):path['join'](__dirname,a0_0x500c1a(0x1fb));function a0_0x3031(){const _0x437341=['exec','show','date','save-memo','mail_since','trash','CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20delemail\x20(\x0a\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20received_at\x20TEXT,\x20subject\x20TEXT,\x20body\x20TEXT,\x20from_addr\x20TEXT,\x0a\x20\x20\x20\x20todo_flag\x20INTEGER,\x20unique_hash\x20TEXT,\x20deadline\x20TEXT,\x20created_at\x20TEXT\x0a\x20\x20)','ceil','syncMail','mailPw','todo_flag','새\x20메일','handle','getBounds','SELECT\x20*\x20FROM\x20todos\x20WHERE\x20todo_flag\x20IN\x20(1,\x202)\x20ORDER\x20BY\x20sort_order\x20ASC,\x20id\x20DESC','toISOString','./db','getDate','SELECT\x20word\x20FROM\x20keywords\x20WHERE\x20type\x20=\x20\x27exclude\x27','replace','type','forEach','/mail-detail.html?','sort_order','Exclude\x20Error:','[이메일\x20할일]\x20','insert-keyword','protocol','darwin','1595805obRkIc','task','host','dday','run','closed','linear-gradient(90deg,#fff700\x200%,#ffe98a\x20100%)','port','open-emails','length','then','new-todo-added','icon.png','deadline','set-mail-complete','join','set-email-deadline','error','body','transaction','toLowerCase','setPosition','SELECT\x20task\x20FROM\x20todos\x20WHERE\x20id\x20=\x20?','PRAGMA\x20table_info(todos)',';color:#222;border-radius:10px;font-family:sans-serif;overflow:hidden;position:relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>','assets','DELETE\x20FROM\x20keywords\x20WHERE\x20id\x20=\x20?','mail_pw','delete-all-todos','SELECT\x20*\x20FROM\x20mail_settings\x20WHERE\x20id=1','./mail','get-todos','word','UPDATE\x20todos\x20SET\x20sort_order\x20=\x20?\x20WHERE\x20id\x20=\x20?','UPDATE\x20emails\x20SET\x20todo_flag\x20=\x200\x20WHERE\x20id\x20=\x20?','quit','getMonth','path','set-todo-deadline','UPDATE\x20todos\x20SET\x20deadline\x20=\x20?,\x20dday\x20=\x20?\x20WHERE\x20id\x20=\x20?','icon.ico','match','11063916UghfqY','UPDATE\x20todos\x20SET\x20todo_flag\x20=\x200\x20WHERE\x20id\x20=\x20?','SELECT\x20*\x20FROM\x20emails\x20WHERE\x20is_notified\x20=\x200\x20AND\x20todo_flag\x20IN\x20(1,2)','ready-to-show','open-mail-detail','preload.js','<body\x20style=\x22margin:0;padding:15px;background:','webContents','split','includes','test','autoClassifyEmailTodo','padStart','prepare','UPDATE\x20emails\x20SET\x20deadline\x20=\x20?\x20WHERE\x20id\x20=\x20?','\x20->\x20변환:\x20','name','string','[분석\x20완료]\x20','set-todo-complete','SELECT\x20id,\x20subject\x20FROM\x20emails\x20WHERE\x20todo_flag\x20=\x201','object','#ffffff',';color:#222;border-radius:10px;font-family:sans-serif;overflow:hidden;\x22><b>','Pomeranian','2ofyAEI','mailSince','update-todo-order','showTrayPopup','include','이메일\x20할일','data:text/html;charset=utf-8,','ALTER\x20TABLE\x20todos\x20ADD\x20COLUMN\x20sort_order\x20INTEGER\x20DEFAULT\x200','loadURL','</b><br><div\x20style=\x22font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;\x22>','whenReady','get-mail-settings','close','get-todo-emails','INSERT\x20OR\x20IGNORE\x20INTO\x20keywords\x20(word,\x20type)\x20VALUES\x20(?,\x20?)','filter','ALTER\x20TABLE\x20keywords\x20ADD\x20COLUMN\x20type\x20TEXT','44781llZEjn','content','[날짜\x20인식\x20성공]\x20추출된\x20텍스트:\x20','from_addr','INSERT\x20INTO\x20todos\x20(date,\x20task,\x20memo,\x20deadline,\x20dday,\x20todo_flag)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?)','getFullYear','SELECT\x20word\x20FROM\x20keywords\x20WHERE\x20type\x20=\x20\x27include\x27','./email_todo_flag','setContextMenu','</div></body>','loadFile','save-mail-settings','setFullYear','523554PZAWAh','SELECT\x20subject\x20FROM\x20emails\x20WHERE\x20id\x20=\x20?','getPrimaryDisplay','electron','order','SELECT\x20id,\x20word,\x20type\x20FROM\x20keywords','mail_id','window-all-closed','once','28nXltdB','platform','40GuEYph','515466wHZtRe','trim','UPDATE\x20todos\x20SET\x20todo_flag\x20=\x20?\x20WHERE\x20id\x20=\x20?','22328gFIrIZ','266334RssHib','map','message','60FQoawt','delete-keyword','get','get-keywords','</b>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x27closeBtn\x27\x20style=\x22position:absolute;top:10px;right:10px;background:#fff;border:none;border-radius:50%;width:22px;height:22px;font-size:15px;cursor:pointer;\x22>×</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;\x22>','file://','minimize','10uwGhES','exclude','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<script>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27closeBtn\x27).onclick\x20=\x20function()\x20{\x20window.close();\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</script>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</body>','subject','SELECT\x20*\x20FROM\x20emails\x20WHERE\x20(deadline\x20IS\x20NULL\x20OR\x20deadline\x20=\x20\x27\x27\x20OR\x20deadline\x20=\x20\x27없음\x27)\x20AND\x20todo_flag\x20IN\x20(1,2)','send','all','exclude-todo','isDestroyed'];a0_0x3031=function(){return _0x437341;};return a0_0x3031();}try{db[a0_0x500c1a(0x20a)](a0_0x500c1a(0x1bc))[a0_0x500c1a(0x1d7)]();const pragma=db[a0_0x500c1a(0x20a)]('PRAGMA\x20table_info(keywords)')['all']();!pragma['some'](_0x3a18f1=>_0x3a18f1['name']===a0_0x500c1a(0x1ca))&&db[a0_0x500c1a(0x1b6)](a0_0x500c1a(0x226));const todoColumns=db[a0_0x500c1a(0x20a)](a0_0x500c1a(0x1ea))[a0_0x500c1a(0x254)]();!todoColumns['some'](_0x343df8=>_0x343df8[a0_0x500c1a(0x20d)]===a0_0x500c1a(0x1cd))&&db[a0_0x500c1a(0x1b6)](a0_0x500c1a(0x21d));}catch(a0_0x1e9cb6){console[a0_0x500c1a(0x1e4)]('DB\x20Init\x20Error:',a0_0x1e9cb6);}ipcMain[a0_0x500c1a(0x1c2)](a0_0x500c1a(0x223),()=>{const _0x301441=a0_0x500c1a;try{return db[_0x301441(0x20a)]('SELECT\x20id,\x20subject,\x20body,\x20received_at,\x20deadline,\x20from_addr,\x20todo_flag\x20FROM\x20emails\x20WHERE\x20todo_flag\x20IN\x20(1,2)\x20ORDER\x20BY\x20todo_flag\x20ASC,\x20received_at\x20DESC')[_0x301441(0x254)]();}catch(_0x25a077){return[];}}),ipcMain[a0_0x500c1a(0x1c2)](a0_0x500c1a(0x1e1),(_0x3e141b,_0x54dd40,_0x164ad9)=>{const _0x17e42e=a0_0x500c1a;try{return db['prepare']('UPDATE\x20emails\x20SET\x20todo_flag\x20=\x20?\x20WHERE\x20id\x20=\x20?')[_0x17e42e(0x1d7)](_0x164ad9,_0x54dd40),{'success':!![]};}catch(_0x4acf9a){return{'success':![]};}}),ipcMain[a0_0x500c1a(0x1c2)](a0_0x500c1a(0x1f2),(_0x111036,_0x366f2d)=>{const _0x2ee0e7=a0_0x500c1a;try{let _0x3c96b2=_0x366f2d===_0x2ee0e7(0x1bb)?db[_0x2ee0e7(0x20a)]('SELECT\x20*\x20FROM\x20todos\x20WHERE\x20todo_flag\x20=\x203\x20ORDER\x20BY\x20id\x20DESC')[_0x2ee0e7(0x254)]():db[_0x2ee0e7(0x20a)](_0x2ee0e7(0x1c4))[_0x2ee0e7(0x254)]();return _0x3c96b2['map'](_0x2ef654=>({'id':_0x2ef654['id'],'task':_0x2ef654['task']||_0x2ef654[_0x2ee0e7(0x228)]||'제목\x20없음','memo':_0x2ef654['memo']||'','deadline':_0x2ef654[_0x2ee0e7(0x1e0)]||'없음','date':_0x2ef654[_0x2ee0e7(0x1b8)],'dday':_0x2ef654[_0x2ee0e7(0x1d6)],'todo_flag':_0x2ef654['todo_flag']}));}catch(_0x4a205a){return[];}}),ipcMain[a0_0x500c1a(0x1c2)](a0_0x500c1a(0x218),(_0x1a7973,_0x1847cb)=>{const _0x6f6ccc=a0_0x500c1a,_0x223916=db[_0x6f6ccc(0x20a)](_0x6f6ccc(0x1f4)),_0x1680d0=db[_0x6f6ccc(0x1e6)](_0x148c6=>{const _0x8c1f29=_0x6f6ccc;for(const _0x484c78 of _0x148c6){_0x223916[_0x8c1f29(0x1d7)](_0x484c78[_0x8c1f29(0x238)],_0x484c78['id']);}});return _0x1680d0(_0x1847cb),{'success':!![]};}),ipcMain[a0_0x500c1a(0x1c2)]('insert-todo',(_0x43fb63,{task:_0x1cf02d,deadline:_0x307cd1,memo:_0x1d8da2})=>{const _0x1a9e12=a0_0x500c1a;try{const _0x4a8ae8=new Date(),_0x5810bf=_0x4a8ae8[_0x1a9e12(0x1c5)]()['slice'](0x0,0x13)[_0x1a9e12(0x1c9)]('T','\x20');let _0xb01e5d=0x0;if(_0x307cd1){const _0x192838=new Date(_0x307cd1),_0x3e1096=new Date(_0x4a8ae8[_0x1a9e12(0x22c)](),_0x4a8ae8[_0x1a9e12(0x1f7)](),_0x4a8ae8[_0x1a9e12(0x1c7)]());_0xb01e5d=Math[_0x1a9e12(0x1bd)]((_0x192838-_0x3e1096)/(0x3e8*0x3c*0x3c*0x18));}const _0x2b7807=_0x1cf02d&&_0x1cf02d[_0x1a9e12(0x206)]('광고')||_0x1d8da2&&_0x1d8da2[_0x1a9e12(0x206)]('광고');return db[_0x1a9e12(0x20a)](_0x1a9e12(0x22b))[_0x1a9e12(0x1d7)](_0x5810bf,_0x1cf02d,_0x1d8da2||'',_0x307cd1||'',_0xb01e5d,_0x2b7807?0x0:0x1),!_0x2b7807&&tray&&global['showTrayPopup']&&global[_0x1a9e12(0x219)]({'subject':'[할일\x20추가]\x20'+_0x1cf02d}),notifyRefresh(),{'success':!![]};}catch(_0x11e4ac){return{'success':![],'error':_0x11e4ac[_0x1a9e12(0x246)]};}}),ipcMain[a0_0x500c1a(0x1c2)](a0_0x500c1a(0x1f9),(_0x3a51f6,_0x5bc8e2,_0x1af1ca)=>{const _0x39eb1c=a0_0x500c1a;try{let _0x5d21a1=0x0;if(_0x1af1ca){const _0x448f60=new Date(),_0x5abe8d=new Date(_0x1af1ca),_0xe195cc=new Date(_0x448f60['getFullYear'](),_0x448f60[_0x39eb1c(0x1f7)](),_0x448f60['getDate']());_0x5d21a1=Math[_0x39eb1c(0x1bd)]((_0x5abe8d-_0xe195cc)/(0x3e8*0x3c*0x3c*0x18));}return db[_0x39eb1c(0x20a)](_0x39eb1c(0x1fa))[_0x39eb1c(0x1d7)](_0x1af1ca,_0x5d21a1,_0x5bc8e2),notifyRefresh(),{'success':!![]};}catch(_0x4655e7){return{'success':![],'error':_0x4655e7[_0x39eb1c(0x246)]};}}),ipcMain[a0_0x500c1a(0x1c2)](a0_0x500c1a(0x210),(_0xa6d493,_0x431289,_0x3e492d)=>{const _0x9e6d08=a0_0x500c1a;return db[_0x9e6d08(0x20a)](_0x9e6d08(0x242))[_0x9e6d08(0x1d7)](_0x3e492d,_0x431289),notifyRefresh(),{'success':!![]};}),ipcMain[a0_0x500c1a(0x1c2)](a0_0x500c1a(0x255),(_0x24614f,_0x30a04a,_0x5e6f2e)=>{const _0x1b3260=a0_0x500c1a;try{let _0x4232f3='';if(_0x5e6f2e){const _0x94389f=db[_0x1b3260(0x20a)](_0x1b3260(0x235))['get'](_0x30a04a);if(_0x94389f){_0x4232f3=_0x94389f[_0x1b3260(0x251)],db[_0x1b3260(0x20a)]('UPDATE\x20emails\x20SET\x20todo_flag\x20=\x200\x20WHERE\x20id\x20=\x20?')[_0x1b3260(0x1d7)](_0x30a04a);if(_0x4232f3){const _0x457eac=(_0x4232f3[_0x1b3260(0x1fc)](/[\p{L}\p{N}]{2,}/gu)||[])['map'](_0x1d6b4d=>_0x1d6b4d[_0x1b3260(0x241)]())[_0x1b3260(0x225)](_0x373354=>_0x373354[_0x1b3260(0x1dc)]>=0x2),_0x497881=[...new Set(_0x457eac)];for(const _0x4d598b of _0x497881){db[_0x1b3260(0x20a)]('INSERT\x20OR\x20IGNORE\x20INTO\x20keywords\x20(word,\x20type)\x20VALUES\x20(?,\x20?)')[_0x1b3260(0x1d7)](_0x4d598b,_0x1b3260(0x24f));}}}}else{const _0x1a8804=db['prepare'](_0x1b3260(0x1e9))[_0x1b3260(0x249)](_0x30a04a);_0x1a8804&&(_0x4232f3=_0x1a8804[_0x1b3260(0x1d4)],db[_0x1b3260(0x20a)](_0x1b3260(0x1fe))[_0x1b3260(0x1d7)](_0x30a04a),_0x4232f3&&db[_0x1b3260(0x20a)](_0x1b3260(0x224))[_0x1b3260(0x1d7)](_0x4232f3,'exclude'));}let _0x235407=[];if(_0x5e6f2e&&_0x4232f3){const _0x25a737=(_0x4232f3[_0x1b3260(0x1fc)](/[가-힣a-zA-Z0-9\-\?\!]{2,}/g)||[])[_0x1b3260(0x245)](_0x4e7bc4=>_0x4e7bc4[_0x1b3260(0x1c9)](/^[\[\(]+|[\]\)]+$/g,'')['trim']())[_0x1b3260(0x225)](_0x21dd00=>_0x21dd00[_0x1b3260(0x1dc)]>=0x2);_0x235407=[...new Set(_0x25a737)];}else!_0x5e6f2e&&_0x4232f3&&(_0x235407=[_0x4232f3]);if(_0x235407['length']>0x0){const _0x3b5f14=db[_0x1b3260(0x20a)](_0x1b3260(0x211))[_0x1b3260(0x254)]();for(const _0x50dc73 of _0x3b5f14){if(!_0x50dc73[_0x1b3260(0x251)])continue;const _0x4218cf=_0x50dc73[_0x1b3260(0x251)];for(const _0x4d929b of _0x235407){if(_0x4218cf[_0x1b3260(0x206)](_0x4d929b)){db[_0x1b3260(0x20a)](_0x1b3260(0x1f5))[_0x1b3260(0x1d7)](_0x50dc73['id']);break;}}}}return notifyRefresh(),{'success':!![]};}catch(_0x4f7d3b){return console['error'](_0x1b3260(0x1ce),_0x4f7d3b),{'success':![]};}});const {markTodoEmails}=require(a0_0x500c1a(0x22e));ipcMain[a0_0x500c1a(0x1c2)](a0_0x500c1a(0x24a),()=>db[a0_0x500c1a(0x20a)](a0_0x500c1a(0x239))[a0_0x500c1a(0x254)]()),ipcMain[a0_0x500c1a(0x1c2)](a0_0x500c1a(0x1d0),(_0xc370f1,_0x362ca5)=>{const _0x3ccbc6=a0_0x500c1a;try{let _0x378cd3,_0xe57a;return typeof _0x362ca5===_0x3ccbc6(0x212)&&_0x362ca5!==null?(_0x378cd3=_0x362ca5[_0x3ccbc6(0x1f3)],_0xe57a=_0x362ca5[_0x3ccbc6(0x1ca)]||_0x3ccbc6(0x21a)):(_0x378cd3=_0x362ca5,_0xe57a=_0x3ccbc6(0x21a)),db['prepare'](_0x3ccbc6(0x224))[_0x3ccbc6(0x1d7)](_0x378cd3,_0xe57a),db[_0x3ccbc6(0x20a)]('UPDATE\x20emails\x20SET\x20todo_flag\x20=\x201\x20WHERE\x20subject\x20LIKE\x20?')[_0x3ccbc6(0x1d7)]('%'+_0x378cd3+'%'),(_0xe57a===_0x3ccbc6(0x24f)||_0xe57a==='sentence')&&markTodoEmails(),notifyRefresh(),{'success':!![]};}catch(_0x1ee649){return{'success':![]};}}),ipcMain[a0_0x500c1a(0x1c2)](a0_0x500c1a(0x248),(_0x1b7df3,_0x1c4e4f)=>{const _0x407c72=a0_0x500c1a;return db['prepare'](_0x407c72(0x1ed))[_0x407c72(0x1d7)](_0x1c4e4f),{'success':!![]};}),ipcMain[a0_0x500c1a(0x1c2)](a0_0x500c1a(0x1b9),(_0x157c18,_0x3d84a5,_0x2b9a35)=>{const _0x40d34d=a0_0x500c1a;return db[_0x40d34d(0x20a)]('UPDATE\x20todos\x20SET\x20memo\x20=\x20?\x20WHERE\x20id\x20=\x20?')[_0x40d34d(0x1d7)](_0x2b9a35,_0x3d84a5),{'success':!![]};}),ipcMain[a0_0x500c1a(0x1c2)](a0_0x500c1a(0x221),()=>{const _0x317db8=a0_0x500c1a;try{const _0x25f452=db[_0x317db8(0x20a)](_0x317db8(0x1f0))[_0x317db8(0x249)]();return _0x25f452?{'protocol':_0x25f452[_0x317db8(0x1d1)],'mailId':_0x25f452[_0x317db8(0x23a)],'mailPw':_0x25f452['mail_pw'],'host':_0x25f452[_0x317db8(0x1d5)],'port':_0x25f452[_0x317db8(0x1da)],'mailSince':_0x25f452[_0x317db8(0x1ba)]}:{};}catch(_0x2c32dd){return{};}}),ipcMain['handle'](a0_0x500c1a(0x232),(_0x451066,_0x1019d7)=>{const _0x21c310=a0_0x500c1a;try{return db[_0x21c310(0x20a)]('INSERT\x20INTO\x20mail_settings\x20(id,\x20protocol,\x20mail_id,\x20mail_pw,\x20host,\x20port,\x20mail_since)\x20\x0a\x20\x20\x20\x20\x20\x20VALUES\x20(1,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)\x20ON\x20CONFLICT(id)\x20DO\x20UPDATE\x20SET\x20\x0a\x20\x20\x20\x20\x20\x20protocol=excluded.protocol,\x20mail_id=excluded.mail_id,\x20mail_pw=excluded.mail_pw,\x20\x0a\x20\x20\x20\x20\x20\x20host=excluded.host,\x20port=excluded.port,\x20mail_since=excluded.mail_since')[_0x21c310(0x1d7)](_0x1019d7['protocol'],_0x1019d7['mailId'],_0x1019d7[_0x21c310(0x1bf)],_0x1019d7[_0x21c310(0x1d5)],_0x1019d7['port'],_0x1019d7[_0x21c310(0x217)]),setTimeout(()=>syncMail(),0x3e8),{'success':!![]};}catch(_0x2feed3){return{'success':![]};}}),ipcMain[a0_0x500c1a(0x1c2)](a0_0x500c1a(0x1ef),()=>{const _0x489812=a0_0x500c1a;return db['prepare']('DELETE\x20FROM\x20todos')[_0x489812(0x1d7)](),notifyRefresh(),{'success':!![]};});function notifyRefresh(){const _0x52a6f5=a0_0x500c1a;mainWindow&&!mainWindow[_0x52a6f5(0x1b5)]()&&mainWindow[_0x52a6f5(0x204)][_0x52a6f5(0x253)](_0x52a6f5(0x1de));}function createWindow(){const _0x394fea=a0_0x500c1a,{screen:_0x5d8154}=require(_0x394fea(0x237)),{width:_0x2844e6,height:_0xee8317}=_0x5d8154[_0x394fea(0x236)]()['workAreaSize'];mainWindow=new BrowserWindow({'width':Math['round'](_0x2844e6/0x3),'height':_0xee8317,'frame':![],'transparent':![],'alwaysOnTop':![],'title':_0x394fea(0x215),'icon':path['join'](__dirname,_0x394fea(0x1ec),_0x394fea(0x1df)),'backgroundColor':_0x394fea(0x213),'webPreferences':{'preload':path[_0x394fea(0x1e2)](__dirname,_0x394fea(0x202)),'contextIsolation':!![]}}),mainWindow[_0x394fea(0x231)]('main.html'),mainWindow['on'](_0x394fea(0x1d8),()=>{mainWindow=null;});}function a0_0x3f2e(_0x5b43c1,_0x5c27ed){_0x5b43c1=_0x5b43c1-0x1b5;const _0x3031ab=a0_0x3031();let _0x3f2eb9=_0x3031ab[_0x5b43c1];return _0x3f2eb9;}ipcMain['on']('close',()=>{const _0x3be783=a0_0x500c1a;if(mainWindow)mainWindow[_0x3be783(0x222)]();}),ipcMain['on'](a0_0x500c1a(0x24d),()=>{if(mainWindow)mainWindow['minimize']();}),ipcMain['on']('open-app-settings',()=>{}),ipcMain['on'](a0_0x500c1a(0x1db),()=>{const _0x244025=a0_0x500c1a,_0x3369a8=new BrowserWindow({'width':0x320,'height':0x258,'autoHideMenuBar':!![],'title':_0x244025(0x215),'icon':path['join'](__dirname,'assets',_0x244025(0x1df)),'webPreferences':{'preload':path[_0x244025(0x1e2)](__dirname,_0x244025(0x202)),'contextIsolation':!![]}});_0x3369a8[_0x244025(0x231)]('mail-list.html');}),ipcMain['on'](a0_0x500c1a(0x201),(_0x26d8db,_0x59659f)=>{const _0xc6498b=a0_0x500c1a,_0x2c0a3f=new BrowserWindow({'width':0x2bc,'height':0x258,'frame':![],'alwaysOnTop':![],'title':'Pomeranian','icon':path[_0xc6498b(0x1e2)](__dirname,_0xc6498b(0x1ec),_0xc6498b(0x1df)),'webPreferences':{'preload':path[_0xc6498b(0x1e2)](__dirname,_0xc6498b(0x202)),'contextIsolation':!![]}});_0x2c0a3f[_0xc6498b(0x21e)](_0xc6498b(0x24c)+__dirname+_0xc6498b(0x1cc)+_0x59659f);});async function syncMail(){const _0x5ab7e7=a0_0x500c1a;try{const _0x5ef959=db[_0x5ab7e7(0x20a)]('SELECT\x20*\x20FROM\x20mail_settings\x20WHERE\x20id=1')[_0x5ab7e7(0x249)]();if(_0x5ef959&&_0x5ef959[_0x5ab7e7(0x23a)]&&_0x5ef959[_0x5ab7e7(0x1ee)]){const _0x191a93=require(_0x5ab7e7(0x1f1));await _0x191a93[_0x5ab7e7(0x1be)](_0x5ef959);const _0x2db494=db[_0x5ab7e7(0x20a)](_0x5ab7e7(0x252))['all']();if(_0x2db494['length']>0x0){const _0x47ed12=db[_0x5ab7e7(0x20a)](_0x5ab7e7(0x20b)),_0x1c9d42=db[_0x5ab7e7(0x1e6)](_0x22f902=>{const _0x17c42f=_0x5ab7e7;for(const _0x11f921 of _0x22f902){const _0x46f90c=extractDeadlineDate(_0x11f921[_0x17c42f(0x251)])||extractDeadlineDate(_0x11f921['body']);_0x46f90c&&_0x47ed12[_0x17c42f(0x1d7)](_0x46f90c,_0x11f921['id']);}});_0x1c9d42(_0x2db494),console['log'](_0x5ab7e7(0x20f)+_0x2db494['length']+'개의\x20메일\x20날짜\x20재검토\x20완료');}notifyRefresh();const _0x41e685=db[_0x5ab7e7(0x20a)](_0x5ab7e7(0x1ff))[_0x5ab7e7(0x254)]();if(_0x41e685[_0x5ab7e7(0x1dc)]>0x0&&tray){const _0x178ca0=db[_0x5ab7e7(0x20a)]('UPDATE\x20emails\x20SET\x20is_notified\x20=\x201\x20WHERE\x20id\x20=\x20?');_0x41e685[_0x5ab7e7(0x1cb)]((_0x12aa69,_0x24877f)=>{setTimeout(()=>{const _0x9a2ca5=a0_0x3f2e;global[_0x9a2ca5(0x219)](_0x12aa69),_0x178ca0[_0x9a2ca5(0x1d7)](_0x12aa69['id']);},_0x24877f*0xbb8);});}}}catch(_0x46625d){console['error']('Sync\x20Error:',_0x46625d);}}app[a0_0x500c1a(0x220)]()[a0_0x500c1a(0x1dd)](()=>{const _0x3cfff4=a0_0x500c1a;createWindow(),setupMailIpc(mainWindow),tray=new Tray(iconPath),tray[_0x3cfff4(0x22f)](Menu['buildFromTemplate']([{'label':'열기','click':()=>{const _0x166a5c=_0x3cfff4;if(mainWindow)mainWindow[_0x166a5c(0x1b7)]();else createWindow();}},{'label':'종료','role':_0x3cfff4(0x1f6)}])),global['showTrayPopup']=function(_0x2556af){const _0x33b3b9=_0x3cfff4,_0x5c62ce=_0x2556af[_0x33b3b9(0x1c0)]===0x1||_0x2556af[_0x33b3b9(0x1c0)]===0x2,_0x95792f=_0x5c62ce?_0x33b3b9(0x1d9):'rgba(0,180,154,0.95)',_0x731d9f=_0x5c62ce?_0x33b3b9(0x21b):_0x33b3b9(0x1c1),_0x312736=_0x5c62ce?_0x33b3b9(0x1cf)+_0x2556af[_0x33b3b9(0x251)]:_0x2556af[_0x33b3b9(0x251)],_0x2e49f2=new BrowserWindow({'width':0x140,'height':0x5a,'frame':![],'alwaysOnTop':![],'skipTaskbar':!![],'transparent':!![],'show':![],'title':'Pomeranian','icon':path['join'](__dirname,_0x33b3b9(0x1ec),_0x33b3b9(0x1df)),'webPreferences':{'contextIsolation':!![],'nodeIntegration':![]}}),_0x3298b5=tray[_0x33b3b9(0x1c3)]();_0x2e49f2[_0x33b3b9(0x1e8)](_0x3298b5['x']-0x78,_0x3298b5['y']-0x64);if(_0x5c62ce){const _0x39af2d='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<body\x20style=\x22margin:0;padding:15px;background:'+_0x95792f+_0x33b3b9(0x1eb)+_0x731d9f+_0x33b3b9(0x24b)+_0x312736+_0x33b3b9(0x250);_0x2e49f2[_0x33b3b9(0x21e)](_0x33b3b9(0x21c)+encodeURIComponent(_0x39af2d)),_0x2e49f2[_0x33b3b9(0x23c)](_0x33b3b9(0x200),()=>_0x2e49f2['show']());}else _0x2e49f2[_0x33b3b9(0x21e)]('data:text/html;charset=utf-8,'+encodeURIComponent(_0x33b3b9(0x203)+_0x95792f+_0x33b3b9(0x214)+_0x731d9f+_0x33b3b9(0x21f)+_0x312736+_0x33b3b9(0x230))),_0x2e49f2['once']('ready-to-show',()=>_0x2e49f2[_0x33b3b9(0x1b7)]()),setTimeout(()=>{const _0x375480=_0x33b3b9;if(!_0x2e49f2[_0x375480(0x1b5)]())_0x2e49f2[_0x375480(0x222)]();},0xdac);},setInterval(syncMail,0xea60),syncMail();}),app['on'](a0_0x500c1a(0x23b),()=>{const _0x9c442c=a0_0x500c1a;if(process[_0x9c442c(0x23e)]===_0x9c442c(0x1d2))app[_0x9c442c(0x1f6)]();});